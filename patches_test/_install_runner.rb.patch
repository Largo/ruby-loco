Patch by MSP-Greg
Allows using runner.rb from install
diff --git a/test/runner.rb b/test/runner.rb
index db2084949e..905066423b 100644
--- a/test/runner.rb
+++ b/test/runner.rb
@@ -6,12 +6,19 @@
 tool_dir = File.join src_testdir, "..", "tool"
 $LOAD_PATH.unshift "#{tool_dir}/lib"
 
-# Get bundled gems on load path
-Dir.glob("#{src_testdir}/../gems/*/*.gemspec")
-  .reject {|f| f =~ /minitest|test-unit|power_assert/ }
-  .map {|f| $LOAD_PATH.unshift File.join(File.dirname(f), "lib") }
+# Get bundled gems on load path, check whether running from install
+abi = RbConfig::CONFIG['ruby_version']
+if Dir.exist? (gem_dir = "#{RbConfig::TOPDIR}/lib/ruby/gems/#{abi}/gems")
+  Dir.glob("#{gem_dir}/*")
+    .reject {|f| f =~ /\/(minitest|test-unit|power_assert)-/ }
+    .each {|f| $LOAD_PATH.unshift f }
+else
+  Dir.glob("#{src_testdir}/../gems/*/*.gemspec")
+    .reject {|f| f =~ /minitest|test-unit|power_assert/ }
+    .each {|f| $LOAD_PATH.unshift File.join(File.dirname(f), "lib") }
+end
 
-require 'test/unit'
+require_relative '../tool/lib/test/unit'
 
 module Gem
 end
