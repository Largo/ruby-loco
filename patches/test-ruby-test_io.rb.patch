diff --git a/test/ruby/test_io.rb b/test/ruby/test_io.rb
index a0a574e69d..980d228797 100644
--- a/test/ruby/test_io.rb
+++ b/test/ruby/test_io.rb
@@ -3359,9 +3359,9 @@ def t.close(unlink_now = false)
         end
         ret
       end
-
+      time_out = /mingw|mswin/ =~ RUBY_PLATFORM ? 70 : 30  # Appveyor 2017-11
       begin
-        assert_separately(["-", bug8431, t.path], <<-"end;", timeout: 30)
+        assert_separately(["-", bug8431, t.path], <<-"end;", timeout: time_out)
           msg = ARGV.shift
           f = open(ARGV[0], "wb")
           f.seek(0xffff_ffff)
